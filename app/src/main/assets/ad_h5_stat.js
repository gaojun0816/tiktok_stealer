!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}n.d(t,"e",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return u});var o={get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return JSON.parse(decodeURIComponent(o.substring(t.length,o.length)))}return null},set:function(e,t,n,r,o){r=void 0!==r&&r;var i="",a="",u="";if(n=null==n?73e3:n,r){var c=_.url("domain",location.href);i=c?"; domain=."+c:""}if(0!==n){var s=new Date;"s"===String(n).slice(-1)?s.setTime(s.getTime()+1e3*Number(String(n).slice(0,-1))):s.setTime(s.getTime()+24*n*60*60*1e3),a="; expires="+s.toGMTString()}o&&(u="; secure"),document.cookie=e+"="+encodeURIComponent(t)+a+"; path=/"+i+u},remove:function(e,t){t=void 0!==t&&t,_.cookie.set(e,"",-1,t)}};function i(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation,t._getPath=e._getPath),t}e._getPath=function(){var e=this;return this.path||this.composedPath&&this.composedPath()||function(){try{var t=e.target,n=[t];if(null===t||null===t.parentElement)return[];for(;null!==t.parentElement;)t=t.parentElement,n.unshift(t);return n}catch(e){return[]}}()},e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0};(function(t,n,r){if(t&&t.addEventListener)t.addEventListener(n,function(t){t._getPath=e._getPath,r.call(this,t)},!1);else{var o="on"+n,i=t[o];t[o]=function(t,n,r){return function(o){if(o=o||e(window.event)){o.target=o.srcElement;var i,a,u=!0;return"function"==typeof r&&(i=r(o)),a=n.call(t,o),!1!==i&&!1!==a||(u=!1),u}}}(t,r,i)}}).apply(null,arguments)}function a(e,t,n){var r,o,i,a=function(){e.apply(r,o)};return function(){r=this,o=arguments;var e=new Date;n&&void 0===i&&a(),(void 0===i||e-i-t>=0)&&(i=e,setTimeout(a,t))}}var u={table:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],UTF16ToUTF8:function(e){for(var t=[],n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);if(o>0&&o<=127)t.push(e.charAt(r));else if(o>=128&&o<=2047){var i=192|o>>6&31,a=128|63&o;t.push(String.fromCharCode(i),String.fromCharCode(a))}else if(o>=2048&&o<=65535){i=224|o>>12&15,a=128|o>>6&63;var u=128|63&o;t.push(String.fromCharCode(i),String.fromCharCode(a),String.fromCharCode(u))}}return t.join("")},UTF8ToUTF16:function(e){var t=[],n=e.length,r=0;for(r=0;r<n;r++){var o=e.charCodeAt(r);if(0==(o>>7&255))t.push(e.charAt(r));else if(6==(o>>5&255)){var i=(31&o)<<6|63&(a=e.charCodeAt(++r));t.push(Sting.fromCharCode(i))}else if(14==(o>>4&255)){var a=e.charCodeAt(++r),u=e.charCodeAt(++r);i=(255&(o<<4|a>>2&15))<<8|((3&a)<<6|63&u);t.push(String.fromCharCode(i))}}return t.join("")},encode:function(e){if(!e)return"";for(var t=this.UTF16ToUTF8(e),n=0,r=t.length,o=[];n<r;){var i=255&t.charCodeAt(n++);if(o.push(this.table[i>>2]),n==r){o.push(this.table[(3&i)<<4]),o.push("==");break}var a=t.charCodeAt(n++);if(n==r){o.push(this.table[(3&i)<<4|a>>4&15]),o.push(this.table[(15&a)<<2]),o.push("=");break}var u=t.charCodeAt(n++);o.push(this.table[(3&i)<<4|a>>4&15]),o.push(this.table[(15&a)<<2|(192&u)>>6]),o.push(this.table[63&u])}return o.join("")},decode:function(e){if(!e)return"";for(var t=e.length,n=0,r=[];n<t;){var o=this.table.indexOf(e.charAt(n++)),i=this.table.indexOf(e.charAt(n++)),a=this.table.indexOf(e.charAt(n++)),u=this.table.indexOf(e.charAt(n++)),c=o<<2|i>>4;if(r.push(String.fromCharCode(c)),-1!=a){var s=(15&i)<<4|a>>2;r.push(String.fromCharCode(s))}if(-1!=u){var l=(3&a)<<6|u;r.push(String.fromCharCode(l))}}return this.UTF8ToUTF16(r.join(""))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(0),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a={online:"https://bee.dmp.meitu.com/v2/event",pre:"http://test-bee.dmp.meitu.com/v2/event"},u="online",c=null,s=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"send",value:function(e,t){var n=+new Date,i=localStorage.getItem("$distinct_id")||r.e();localStorage.setItem("$distinct_id",i);var a={$distinct_id:i,$create_time:n,$send_time:n,$event:e.$event,$page:document.location.href,properties:o({},e,{viewport_height:(document.documentElement.clientHeight||0).toString(),viewport_width:(document.documentElement.clientWidth||0).toString(),resolution:[screen.width||0,screen.height||0].join("x"),page_duration:n-c})},u="project="+this.project+"&token="+this.token+"&data="+encodeURIComponent(r.a.encode(JSON.stringify(a)));this.sendByImage(u,t),console.log("=====","发送数据:",a)}},{key:"sendByImage",value:function(e,t){t=t||function(){};var n=document.createElement("img");n.width=1,n.height=1,n.onload=function(e){this.onload=null,n=null,t(!0)},n.onerror=function(e){this.onerror=null,n=null,t(!1),console.log(e)},n.onabort=function(e){this.onabort=null,n=null,t()},n.src=(a[u]||a.online)+"?"+e}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u=t.env||"online",delete t.env,t.project)if(this.project=t.project,delete t.project,t.token){this.token=t.token,delete t.token;var n=function(t){var n=+new Date,r={};"load"==t.type?(r.start_time=n,c=n):r.end_time=n-c,e.send({$event:t.type,event_type:1002,params:r})};r.b(window,"load",n),r.b(window,"mtec_analytics_webclose_event",n)}else console.error("STAT token is must!");else console.error("STAT project is must!")}},{key:"ad_h5_stat",value:function(e,t,n){e?this.init({token:"fo7bhleq93iw6aoz",project:"ad_browser"}):this.init({token:123456,project:"test",env:"pre"});var r={$event:"ad_browser_page_view",url:document.location.href,l_url:document.referrer.length>0?document.referrer:t};for(var t in n)!0===n.hasOwnProperty(t)&&(r[t]=n[t]);this.send(o({},r))}}]),e}());window.STAT=s}]);